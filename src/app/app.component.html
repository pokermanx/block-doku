<span class="score">{{ score }}</span>

<div class="board-wrapper">
  <div class="board"
       (drop)="onDrop($event)"
       (dragover)="onDragOver($event)">
    <div *ngFor="let row of board; let iBlock = index"
         class="block-tile">
      <div *ngFor="let innerRow of row; let iRow = index"
           class="inner-row">
        <div *ngFor="let tile of innerRow; let iTile = index"
             class="tile"
             [id]="'board;' + iBlock + ';' + iRow + ';' + iTile"
             [ngClass]="{
                'filled': tile.isFilled,
                'empty': !tile.isFilled,
                'preview': tile.isProjection,
                'match': tile.isMatchPreview
              }">
        </div>
      </div>
    </div>
  </div>
</div>

<div class="shape-set-wrapper">
  <div class="shape-set">
    <div *ngFor="let shape of shapeSet; let iShape = index"
         class="shape"
         draggable="true"
         [ngClass]="{
           'dragged': shape.isBeingDragged
         }"
         (dragend)="onDragEnd($event, shape)"
         (dragstart)="onDragStart($event, shape)">
      <div *ngFor="let row of shape.pattern"
           class="block-tile">
        <div *ngFor="let innerRow of row"
             class="inner-row">
          <div *ngFor="let tile of innerRow"
               class="tile"
               (mousedown)="setStartPoint($event, shape)"
               [id]="'shape-' + iShape + ';' + tile.coords.iBlock + ';' + tile.coords.iRow + ';' + tile.coords.iTile"
               [ngClass]="{
                'filled': tile.isFilled,
                'empty': !tile.isFilled
               }">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="board-wrapper">
  <div class="board">
    <div *ngFor="let row of generatorBoard; let iBlock = index"
         class="block-tile">
      <div *ngFor="let innerRow of row; let iRow = index"
           class="inner-row">
        <div *ngFor="let tile of innerRow; let iTile = index"
             (click)="tile.isFilled = !tile.isFilled"
             class="tile"
             [id]="'generator-board;' + iBlock + ';' + iRow + ';' + iTile"
             [ngClass]="{
                  'filled': tile.isFilled,
                  'empty': !tile.isFilled
                }">
        </div>
      </div>
    </div>
  </div>
  <button (click)="generateShape()">Generate</button>
</div>